{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Investment by Region and Type",
  "width": 800,
  "height": 800,
  "data": {
    "url": "dataset/state-by-region-2023-2024.csv"
  },
  "mark": "bar",
  "encoding": {
    "x": {"field": "Region", "type": "nominal", "axis": {"title": "Region"}},
    "y": {
      "field": "investment", 
      "type": "quantitative", 
      "aggregate": "sum", 
      "axis": {"title": "Total Investment"}
    },
    "color": {
      "field": "entity",
      "type": "nominal",
      "legend": {"title": "Entity Type"},
      "scale": {
        "domain": ["Department of Justice and Community Safety", "Department of Education", "Department of Energy, Environment and Climate Action", 
                  "Department of Government Services", "Department of Health", "Department of Jobs, Skills, Industry and Regions",
                  "Department of Transport and Planning"],
        "range": ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2"]
      }
    },
    "tooltip": [
      {"field": "Region", "type": "nominal"},
      {"field": "entity", "type": "nominal"},
      {"field": "investment", "type": "quantitative", "aggregate": "sum"}
    ]
  },
  "params": [
    {
      "name": "entity_selection",
      "bind":{
        "input": "select",
        "options": [null,"Department of Justice and Community Safety", "Department of Education", "Department of Energy, Environment and Climate Action", "Department of Government Services", "Department of Health", "Department of Jobs, Skills, Industry and Regions",
                    "Department of Transport and Planning"],
        "name": "Entity Selection: ",
        "labels": ["Show All","Department of Justice and Community Safety", "Department of Education", "Department of Energy, Environment and Climate Action", 
        "Department of Government Services", "Department of Health", "Department of Jobs, Skills, Industry and Regions",
        "Department of Transport and Planning"]
      }
    }
  ],
  "transform": [
    {"filter":"entity_selection == null || datum.entity == entity_selection"}
  ]
}
